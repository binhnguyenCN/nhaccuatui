// libs
import Head from 'next/head';
import React from 'react';
import { connect } from 'react-redux';
// layouts
import Home from '../views/Home';
// others
import mockData from '@/api/mockApi';
import { wrapper } from '@/store/store';
import {
  albumListAction,
  bannerListAction,
  hotTopicAction,
  newSongAction,
  songListAction,
  songRankingAction,
  topSongAction,
  videoListAction,
} from '@/store/actions';

export const getStaticProps = wrapper.getStaticProps((store) => () => {
  const data = { ...mockData };
  // eslint-disable-next-line no-console
  console.log('2. Page.getServerSideProps uses the store to dispatch things');
  store.dispatch(albumListAction.fetchAlbumList(data.albumList));
  store.dispatch(bannerListAction.fetchBannerList(data.bannerList));
  store.dispatch(hotTopicAction.fetchHotTopic(data.hotTopic));
  store.dispatch(topSongAction.fetchTopSong(data.topSong));
  store.dispatch(newSongAction.fetchNewSong(data.newSong));
  store.dispatch(songListAction.fetchSongList(data.songList));
  store.dispatch(songRankingAction.fetchSongRanking(data.songRanking));
  store.dispatch(videoListAction.fetchVideoList(data.videoList));
});

const HomePage = (props) => {
  const {
    banners,
    albums,
    hotTopic,
    newSong,
    songs,
    songRanking,
    topSong,
    videos,
  } = props;

  return (
    <>
      <Head>
        <meta charSet="UTF-8" />
        <meta httpEquiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Generated by create next app" />
        <title>nhaccuatui</title>
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Home
        bannerList={banners.bannerList}
        albumList={albums.albumList}
        newSong={newSong.newSongList}
        videoList={videos.videoList}
        songList={songs.songList}
        topSong={topSong.topSongList}
        songRanking={songRanking.songRankingList}
        hotTopic={hotTopic.hotTopicList}
      />
    </>
  );
};
export default connect((state) => state)(HomePage);
